#!/bin/sh
# Script: cig-load-existing-tasks
# Version: v0.1.1-5-gcea1c19
# Source: https://github.com/OWNER/REPO
# Purpose: Discovers all task headers across implementation guide directory structure
# Replaces: find implementation-guide -name "*.md" -type f | head -50 | xargs grep -l "# " | head -20

if [ ! -d "implementation-guide" ]; then
    echo "No implementation guide directory found"
    exit 0
fi

# Find markdown files and extract task headers with file paths and line numbers
find implementation-guide -name "*.md" -type f | head -50 | while read -r file; do
    if [ -f "$file" ]; then
        grep -n "^# " "$file" 2>/dev/null | sed "s|^|$file:|"
    fi
done | head -20